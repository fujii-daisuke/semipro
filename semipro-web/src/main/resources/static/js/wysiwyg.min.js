"use strict";function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,a){for(var i=0;i<a.length;i++){var n=a[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,a,i){return a&&_defineProperties(t.prototype,a),i&&_defineProperties(t,i),t}!function(t){var a=function(){function a(i,n){_classCallCheck(this,a),this.defaults={tooltips:!0,translations:{paragraph:"Paragraph",heading:"Heading",preformatted:"Preformatted",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",textcolor:"Color",alignleft:"Align Left",aligncenter:"Align Center",alignright:"Align Right",alignjustify:"Align Justify",insertlink:"Insert Link",insertpicture:"Insert Picture",bulletlist:"Ordered List",numberedlist:"Numbered List",enterurl:"Enter a URL",imageurl:"Image URL",linkdescription:"Enter a description for this link",linkname:"Link name",showHTML:"Show HTML code"},colorPalette:{red:"#f44336",pink:"#e91e63",purple:"#9c27b0",deeppurple:"#673ab7",indigo:"#3f51b5",blue:"#2196f3",lightblue:"#03a9f4",cyan:"#00bcd4",teal:"#009688",green:"#4caf50",lightgreen:"#8bc34a",lime:"#cddc39",yellow:"#ffeb3b",amber:"#ffc107",orange:"#ff9800",deeporange:"#ff5722",brown:"#795548",grey:"#9e9e9e",bluegrey:"#607d8b",mdb:"#45526e",white:"#fff",black:"#000"}},this.$textarea=t(i),this.content=this.$textarea.val(),this.uuid=this._randomUUID(),this.options=this.assignOptions(n),this.colors="",this.isCodeShown=!1}return _createClass(a,[{key:"init",value:function(){this.renderColorPalette(),this.buildTemplate(),this.bindEvents(),t('[data-toggle="tooltip"]').tooltip()}},{key:"assignOptions",value:function(a){return t.extend({},this.defaults,a)}},{key:"bindEvents",value:function(){t("#wysiwyg-".concat(this.uuid)).on("keypress",this.updateNativeTextarea.bind(this)),t(".mdb-wysiwyg-toolbar button[data-action]").on("click",this.performAction.bind(this)),t(".mdb-wysiwyg-toolbar [data-tagname]").on("click",this.changeTagName.bind(this)),t(".mdb-wysiwyg-toolbar-dropdown-toggle").on("click",this.toggleOptionsList.bind(this)),t(".mdb-wysiwyg-toolbar [data-color]").on("click",this.setColor.bind(this)),t('.mdb-wysiwyg-toolbar [data-action="insertlink"]').on("click",this.insertLink.bind(this)),t('.mdb-wysiwyg-toolbar [data-action="insertpicture"]').on("click",this.insertPicture.bind(this)),t('.mdb-wysiwyg-toolbar [data-action="toggleHTML"]').on("click",this.toggleHTML.bind(this)),t(".mdb-wysiwyg-textarea").on("mousedown",this.updateToolbar.bind(this)),!0===this.options.tooltips&&t("[data-tooltip]").tooltip({trigger:"hover"})}},{key:"renderColorPalette",value:function(){var a=this;t.each(this.options.colorPalette,function(t,i){a.colors+='<li><button data-color="'.concat(i,'" style="background: ').concat(i,';"></button></li>')})}},{key:"buildTemplate",value:function(){var t='\n        <div class="mdb-wysiwyg-container">\n          <div class="mdb-wysiwyg-toolbar">\n            <div class="mdb-wysiwyg-toolbar-group">\n              <div class="mdb-wysiwyg-toolbar-dropdown">\n                <button class="mdb-wysiwyg-toolbar-dropdown-toggle"><span>'.concat(this.options.translations.paragraph,'</span></button>\n                <ul class="mdb-wysiwyg-toolbar-options-list">\n                  <li><a href="#" data-tagname="p">').concat(this.options.translations.paragraph,'</a></li>\n                  <li><a href="#" data-tagname="h1">').concat(this.options.translations.heading,' 1</a></li>\n                  <li><a href="#" data-tagname="h2">').concat(this.options.translations.heading,' 2</a></li>\n                  <li><a href="#" data-tagname="h3">').concat(this.options.translations.heading,' 3</a></li>\n                  <li><a href="#" data-tagname="h4">').concat(this.options.translations.heading,' 4</a></li>\n                  <li><a href="#" data-tagname="h5">').concat(this.options.translations.heading,' 5</a></li>\n                  <li><a href="#" data-tagname="h6">').concat(this.options.translations.heading,' 6</a></li>\n                  <li><a href="#" data-tagname="pre">').concat(this.options.translations.preformatted,'</a></li>\n                </ul>\n              </div>\n            </div>\n            <div class="mdb-wysiwyg-toolbar-group">\n              <ul class="mdb-wysiwyg-toolbar-options">\n                <li><button data-action="bold" data-tooltip data-placement="bottom" title="').concat(this.options.translations.bold,'"><i class="fas fa-bold"></i></button></li>\n                <li><button data-action="italic" data-tooltip data-placement="bottom" title="').concat(this.options.translations.italic,'"><i class="fas fa-italic"></i></button></li>\n                <li><button data-action="strikethrough" data-tooltip data-placement="bottom" title="').concat(this.options.translations.strikethrough,'"><i class="fas fa-strikethrough"></i></button></li>\n                <li><button data-action="underline" data-tooltip data-placement="bottom" title="').concat(this.options.translations.underline,'"><i class="fas fa-underline"></i></button></li>\n                <li>\n                  <button data-tooltip data-placement="bottom" title="').concat(this.options.translations.textcolor,'" class="mdb-wysiwyg-toolbar-dropdown-toggle"><i class="fas fa-font"></i></button>\n                  <ul class="mdb-wysiwyg-toolbar-options-list mdb-wysiwyg-toolbar-color-palette">\n                    ').concat(this.colors,'\n                  </ul>\n                </li>\n              </ul>\n            </div>\n            <div class="mdb-wysiwyg-toolbar-group">\n              <ul class="mdb-wysiwyg-toolbar-options">\n                <li><button data-action="justifyleft" data-tooltip data-placement="bottom" title="').concat(this.options.translations.alignleft,'"><i class="fas fa-align-left"></i></button></li>\n                <li><button data-action="justifycenter" data-tooltip data-placement="bottom" title="').concat(this.options.translations.aligncenter,'"><i class="fas fa-align-center"></i></button></li>\n                <li><button data-action="justifyright" data-tooltip data-placement="bottom" title="').concat(this.options.translations.alignright,'"><i class="fas fa-align-right"></i></button></li>\n                <li><button data-action="justifyfull " data-tooltip data-placement="bottom" title="').concat(this.options.translations.alignjustify,'"><i class="fas fa-align-justify"></i></button></li>\n              </ul>\n            </div>\n            <div class="mdb-wysiwyg-toolbar-group">\n              <ul class="mdb-wysiwyg-toolbar-options">\n                <li><button data-action="insertlink" data-tooltip data-placement="bottom" title="').concat(this.options.translations.insertlink,'"><i class="fas fa-paperclip"></i></button></li>\n                <li><button data-action="insertpicture" data-tooltip data-placement="bottom" title="').concat(this.options.translations.insertpicture,'"><i class="far fa-image"></i></button></li>\n              </ul>\n            </div>\n            <div class="mdb-wysiwyg-toolbar-group">\n              <ul class="mdb-wysiwyg-toolbar-options">\n                <li><button data-action="insertUnorderedList" data-tooltip data-placement="bottom" title="').concat(this.options.translations.bulletlist,'"><i class="fas fa-list-ul"></i></button></li>\n                <li><button data-action="insertOrderedList" data-tooltip data-placement="bottom" title="').concat(this.options.translations.numberedlist,'"><i class="fas fa-list-ol"></i></button></li>\n              </ul>\n            </div>\n            <div class="mdb-wysiwyg-toolbar-group">\n              <ul class="mdb-wysiwyg-toolbar-options">\n                <li><button data-action="toggleHTML" data-tooltip data-placement="bottom" title="').concat(this.options.translations.showHTML,'"><i class="fas fa-code"></i></button></li>\n              </ul>\n            </div>\n          </div>\n          <div class="mdb-wysiwyg-textarea" contenteditable="true" id="wysiwyg-').concat(this.uuid,'">').concat(this.content,"</div>\n\n        </div>\n      ");this.$textarea.css({width:0,height:0,visibility:"hidden"}),this.$textarea.after(t)}},{key:"updateToolbar",value:function(){var a=t("#wysiwyg-".concat(this.uuid)).parent().find(".mdb-wysiwyg-toolbar [data-action]");t.each(a,function(a,i){var n=t(i).data("action");document.queryCommandState(n)?t(i).addClass("active"):t(i).removeClass("active")});var i=t("#wysiwyg-".concat(this.uuid)).parent().find(".mdb-wysiwyg-toolbar [data-tagname]");t.each(i,function(a,i){var n=t(i).data("tagname");document.queryCommandValue("formatBlock")===n&&t(i).closest(".mdb-wysiwyg-toolbar-dropdown").find("button").text(t(i).text())})}},{key:"insertLink",value:function(t){t.preventDefault();var a=prompt(this.options.translations.enterurl+":","http://"),i=document.getSelection();null===a|"http://"===a||(""===i.toString()&&(i=prompt(this.options.translations.linkdescription+":",this.options.translations.linkname)),document.execCommand("insertHTML",!1,'<a href="'+a+'" target="_blank">'+i+"</a>"))}},{key:"insertPicture",value:function(t){t.preventDefault();var a=prompt(this.options.translations.imageurl+":","http://");null===a|"http://"===a||document.execCommand("insertHTML",!1,'<img src="'+a+'" target="_blank" class="img-fluid" />')}},{key:"performAction",value:function(a){a.preventDefault();var i=t(a.target).closest("button");document.execCommand(i.data("action"),!1,null)}},{key:"changeTagName",value:function(a){a.preventDefault();var i=t(a.target);document.execCommand("formatBlock",!1,i.data("tagname")),t(a.target).closest(".mdb-wysiwyg-toolbar-options-list").removeClass("visible")}},{key:"setColor",value:function(a){a.preventDefault();var i=t(a.target).data("color");document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,i),t(a.target).closest(".mdb-wysiwyg-toolbar-options-list").removeClass("visible")}},{key:"toggleOptionsList",value:function(a){a.stopImmediatePropagation(),a.preventDefault(),t(a.target).parent().find(".mdb-wysiwyg-toolbar-options-list").toggleClass("visible")}},{key:"updateNativeTextarea",value:function(){var a=t("#wysiwyg-".concat(this.uuid)).html();t(this.$textarea).val(a)}},{key:"toggleHTML",value:function(a){a.preventDefault();var i=t(a.target).closest('[data-action="toggleHTML"]'),n=t("#wysiwyg-".concat(this.uuid));this.isCodeShown?(n.html(n.text()).removeClass("show-raw"),this.isCodeShown=!1,i.removeClass("active")):(n.text(n.html()).addClass("show-raw"),this.isCodeShown=!0,i.addClass("active"))}},{key:"_randomUUID",value:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===a?i:3&i|8).toString(16)})}}]),a}();t.fn.mdbWYSIWYG=function(i){var n=this;return this.each(function(){new a(t(n),i).init()})}}(jQuery);